(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('@angular/common/http'), require('@angular/animations'), require('@angular/forms'), require('@angular/common'), require('@angular/platform-browser/animations')) :
    typeof define === 'function' && define.amd ? define('angular2-image-gallery', ['exports', '@angular/core', 'rxjs', '@angular/common/http', '@angular/animations', '@angular/forms', '@angular/common', '@angular/platform-browser/animations'], factory) :
    (factory((global['angular2-image-gallery'] = {}),global.ng.core,global.rxjs,global.ng.common.http,global.ng.animations,global.ng.forms,global.ng.common,global.ng.platformBrowser.animations));
}(this, (function (exports,core,rxjs,http,animations,forms,common,animations$1) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ImageService = /** @class */ (function () {
        function ImageService() {
            this.imagesUpdatedSource = new rxjs.Subject();
            this.imageSelectedIndexUpdatedSource = new rxjs.Subject();
            this.showImageViewerSource = new rxjs.Subject();
            this.imagesUpdated$ = this.imagesUpdatedSource.asObservable();
            this.imageSelectedIndexUpdated$ = this.imageSelectedIndexUpdatedSource.asObservable();
            this.showImageViewerChanged$ = this.showImageViewerSource.asObservable();
        }
        /**
         * @param {?} images
         * @return {?}
         */
        ImageService.prototype.updateImages = /**
         * @param {?} images
         * @return {?}
         */
            function (images) {
                this.imagesUpdatedSource.next(images);
            };
        /**
         * @param {?} newIndex
         * @return {?}
         */
        ImageService.prototype.updateSelectedImageIndex = /**
         * @param {?} newIndex
         * @return {?}
         */
            function (newIndex) {
                this.imageSelectedIndexUpdatedSource.next(newIndex);
            };
        /**
         * @param {?} show
         * @return {?}
         */
        ImageService.prototype.showImageViewer = /**
         * @param {?} show
         * @return {?}
         */
            function (show) {
                this.showImageViewerSource.next(show);
            };
        ImageService.decorators = [
            { type: core.Injectable },
        ];
        return ImageService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GalleryComponent = /** @class */ (function () {
        function GalleryComponent(imageService, http$$1, changeDetectorRef) {
            this.imageService = imageService;
            this.http = http$$1;
            this.changeDetectorRef = changeDetectorRef;
            this.gallery = [];
            this.imageDataStaticPath = 'assets/img/gallery/';
            this.imageDataCompletePath = '';
            this.dataFileName = 'data.json';
            this.images = [];
            this.minimalQualityCategory = 'preview_xxs';
            this.rowIndex = 0;
            this.rightArrowInactive = false;
            this.leftArrowInactive = false;
            this.providedImageMargin = 3;
            this.providedImageSize = 7;
            this.providedGalleryName = '';
            this.providedMetadataUri = undefined;
            this.rowsPerPage = 200;
            this.viewerChange = new core.EventEmitter();
        }
        /**
         * @param {?} event
         * @return {?}
         */
        GalleryComponent.prototype.triggerCycle = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.scaleGallery();
            };
        /**
         * @param {?} event
         * @return {?}
         */
        GalleryComponent.prototype.windowResize = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                this.render();
            };
        /**
         * @return {?}
         */
        GalleryComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.fetchDataAndRender();
                this.viewerSubscription = this.imageService.showImageViewerChanged$
                    .subscribe(function (visibility) { return _this.viewerChange.emit(visibility); });
            };
        /**
         * @param {?} changes
         * @return {?}
         */
        GalleryComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                // input params changed
                if (changes['providedGalleryName'] != undefined) {
                    this.fetchDataAndRender();
                }
                else {
                    this.render();
                }
            };
        /**
         * @return {?}
         */
        GalleryComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.viewerSubscription) {
                    this.viewerSubscription.unsubscribe();
                }
            };
        /**
         * @param {?} img
         * @return {?}
         */
        GalleryComponent.prototype.openImageViewer = /**
         * @param {?} img
         * @return {?}
         */
            function (img) {
                this.imageService.updateImages(this.images);
                this.imageService.updateSelectedImageIndex(this.images.indexOf(img));
                this.imageService.showImageViewer(true);
            };
        /**
         * direction (-1: left, 1: right)
         */
        /**
         * direction (-1: left, 1: right)
         * @param {?} direction
         * @return {?}
         */
        GalleryComponent.prototype.navigate = /**
         * direction (-1: left, 1: right)
         * @param {?} direction
         * @return {?}
         */
            function (direction) {
                if ((direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage)
                    || (direction === -1 && this.rowIndex > 0)) {
                    this.rowIndex += (this.rowsPerPage * direction);
                }
                this.refreshNavigationErrorState();
            };
        /**
         * @return {?}
         */
        GalleryComponent.prototype.calcImageMargin = /**
         * @return {?}
         */
            function () {
                /** @type {?} */
                var galleryWidth = this.getGalleryWidth();
                /** @type {?} */
                var ratio = galleryWidth / 1920;
                return Math.round(Math.max(1, this.providedImageMargin * ratio));
            };
        /**
         * @private
         * @return {?}
         */
        GalleryComponent.prototype.fetchDataAndRender = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                this.imageDataCompletePath = this.providedMetadataUri;
                if (!this.providedMetadataUri) {
                    this.imageDataCompletePath = this.providedGalleryName !== '' ?
                        this.imageDataStaticPath + this.providedGalleryName + "/" + this.dataFileName :
                        this.imageDataStaticPath + this.dataFileName;
                }
                this.http.get(this.imageDataCompletePath)
                    .subscribe(function (data) {
                    _this.images = data;
                    _this.imageService.updateImages(_this.images);
                    _this.images.forEach(function (image) {
                        image['galleryImageLoaded'] = false;
                        image['viewerImageLoaded'] = false;
                        image['srcAfterFocus'] = '';
                    });
                    // twice, single leads to different strange browser behaviour
                    _this.render();
                    _this.render();
                }, function (err) {
                    if (_this.providedMetadataUri) {
                        console.error("Provided endpoint '" + _this.providedMetadataUri + "' did not serve metadata correctly or in the expected format.\n      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,\n      Original error: " + err);
                    }
                    else {
                        console.error("Did you run the convert script from angular2-image-gallery for your images first? Original error: " + err);
                    }
                }, function () { return undefined; });
            };
        /**
         * @private
         * @return {?}
         */
        GalleryComponent.prototype.render = /**
         * @private
         * @return {?}
         */
            function () {
                this.gallery = [];
                /** @type {?} */
                var tempRow = [this.images[0]];
                /** @type {?} */
                var currentRowIndex = 0;
                /** @type {?} */
                var i = 0;
                for (i; i < this.images.length; i++) {
                    while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {
                        i++;
                    }
                    if (this.images[i + 1]) {
                        tempRow.pop();
                    }
                    this.gallery[currentRowIndex++] = tempRow;
                    tempRow = [this.images[i + 1]];
                }
                this.scaleGallery();
            };
        /**
         * @private
         * @param {?} imgRow
         * @param {?} candidate
         * @return {?}
         */
        GalleryComponent.prototype.shouldAddCandidate = /**
         * @private
         * @param {?} imgRow
         * @param {?} candidate
         * @return {?}
         */
            function (imgRow, candidate) {
                /** @type {?} */
                var oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);
                imgRow.push(candidate);
                /** @type {?} */
                var newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);
                return Math.abs(oldDifference) > Math.abs(newDifference);
            };
        /**
         * @private
         * @param {?} imgRow
         * @return {?}
         */
        GalleryComponent.prototype.calcRowHeight = /**
         * @private
         * @param {?} imgRow
         * @return {?}
         */
            function (imgRow) {
                /** @type {?} */
                var originalRowWidth = this.calcOriginalRowWidth(imgRow);
                /** @type {?} */
                var ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth;
                /** @type {?} */
                var rowHeight = imgRow[0][this.minimalQualityCategory]['height'] * ratio;
                return rowHeight;
            };
        /**
         * @private
         * @param {?} imgRow
         * @return {?}
         */
        GalleryComponent.prototype.calcOriginalRowWidth = /**
         * @private
         * @param {?} imgRow
         * @return {?}
         */
            function (imgRow) {
                var _this = this;
                /** @type {?} */
                var originalRowWidth = 0;
                imgRow.forEach(function (img) {
                    /** @type {?} */
                    var individualRatio = _this.calcIdealHeight() / img[_this.minimalQualityCategory]['height'];
                    img[_this.minimalQualityCategory]['width'] = img[_this.minimalQualityCategory]['width'] * individualRatio;
                    img[_this.minimalQualityCategory]['height'] = _this.calcIdealHeight();
                    originalRowWidth += img[_this.minimalQualityCategory]['width'];
                });
                return originalRowWidth;
            };
        /**
         * @private
         * @return {?}
         */
        GalleryComponent.prototype.calcIdealHeight = /**
         * @private
         * @return {?}
         */
            function () {
                return this.getGalleryWidth() / (80 / this.providedImageSize) + 100;
            };
        /**
         * @private
         * @return {?}
         */
        GalleryComponent.prototype.getGalleryWidth = /**
         * @private
         * @return {?}
         */
            function () {
                if (this.galleryContainer.nativeElement.clientWidth === 0) {
                    // for IE11
                    return this.galleryContainer.nativeElement.scrollWidth;
                }
                return this.galleryContainer.nativeElement.clientWidth;
            };
        /**
         * @private
         * @return {?}
         */
        GalleryComponent.prototype.scaleGallery = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var imageCounter = 0;
                /** @type {?} */
                var maximumGalleryImageHeight = 0;
                this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage)
                    .forEach(function (imgRow) {
                    /** @type {?} */
                    var originalRowWidth = _this.calcOriginalRowWidth(imgRow);
                    if (imgRow !== _this.gallery[_this.gallery.length - 1]) {
                        /** @type {?} */
                        var ratio_1 = (_this.getGalleryWidth() - (imgRow.length - 1) * _this.calcImageMargin()) / originalRowWidth;
                        imgRow.forEach(function (img) {
                            img['width'] = img[_this.minimalQualityCategory]['width'] * ratio_1;
                            img['height'] = img[_this.minimalQualityCategory]['height'] * ratio_1;
                            maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);
                            _this.checkForAsyncLoading(img, imageCounter++);
                        });
                    }
                    else {
                        imgRow.forEach(function (img) {
                            img.width = img[_this.minimalQualityCategory]['width'];
                            img.height = img[_this.minimalQualityCategory]['height'];
                            maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);
                            _this.checkForAsyncLoading(img, imageCounter++);
                        });
                    }
                });
                this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs';
                this.refreshNavigationErrorState();
                this.changeDetectorRef.detectChanges();
            };
        /**
         * @private
         * @param {?} image
         * @param {?} imageCounter
         * @return {?}
         */
        GalleryComponent.prototype.checkForAsyncLoading = /**
         * @private
         * @param {?} image
         * @param {?} imageCounter
         * @return {?}
         */
            function (image, imageCounter) {
                /** @type {?} */
                var imageElements = this.imageElements.toArray();
                if (image['galleryImageLoaded'] ||
                    (imageElements.length > 0 &&
                        imageElements[imageCounter] &&
                        this.isScrolledIntoView(imageElements[imageCounter].nativeElement))) {
                    image['galleryImageLoaded'] = true;
                    image['srcAfterFocus'] = image[this.minimalQualityCategory]['path'];
                }
                else {
                    image['srcAfterFocus'] = '';
                }
            };
        /**
         * @private
         * @param {?} element
         * @return {?}
         */
        GalleryComponent.prototype.isScrolledIntoView = /**
         * @private
         * @param {?} element
         * @return {?}
         */
            function (element) {
                /** @type {?} */
                var elementTop = element.getBoundingClientRect().top;
                /** @type {?} */
                var elementBottom = element.getBoundingClientRect().bottom;
                return elementTop < window.innerHeight && elementBottom >= 0 && (elementBottom > 0 || elementTop > 0);
            };
        /**
         * @private
         * @return {?}
         */
        GalleryComponent.prototype.refreshNavigationErrorState = /**
         * @private
         * @return {?}
         */
            function () {
                this.leftArrowInactive = this.rowIndex == 0;
                this.rightArrowInactive = this.rowIndex > (this.gallery.length - this.rowsPerPage);
            };
        GalleryComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'gallery',
                        template: "<div #galleryContainer class=\"galleryContainer\">\n    <div class=\"innerGalleryContainer\">\n        <div *ngFor='let imgrow of gallery | slice:rowIndex:rowIndex+rowsPerPage; let i = index'\n             class=\"imagerow\"\n             [style.margin-bottom.px]=\"calcImageMargin()\">\n            <img #imageElement\n                 *ngFor='let img of imgrow; let j = index'\n                 class=\"thumbnail\"\n                 [style.width.px]=\"img['width']\"\n                 [style.height.px]=\"img['height']\"\n                 (click)=\"openImageViewer(img)\"\n                 [src]=\"img['srcAfterFocus']\"\n                 [style.background]=\"img.dominantColor\"\n                 [style.margin-right.px]=\"calcImageMargin()\"/>\n        </div>\n    </div>\n\n    <div class=\"pagerContainer\" *ngIf=\"(!rightArrowInactive || !leftArrowInactive)\">\n        <img [ngClass]=\"{'inactive': leftArrowInactive}\" class=\"pager left\"\n             src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+\"\n             (click)=\"navigate(-1)\"/>\n        <img [ngClass]=\"{'inactive': rightArrowInactive}\" class=\"pager right\"\n             src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4=\"\n             (click)=\"navigate(1)\"/>\n    </div>\n</div>\n\n<viewer></viewer>\n",
                        styles: [".innerGalleryContainer{position:relative}.galleryContainer{height:100%;width:100%;overflow:hidden}.innerGalleryContainer img:last-child{margin-right:-1px!important}.galleryContainer img:hover{-webkit-filter:brightness(50%);filter:brightness(50%);transition:all ease-out .2s;cursor:pointer}.imagerow{margin-right:1px;overflow:hidden;display:flex}::-webkit-scrollbar{display:none}.asyncLoadingContainer{position:absolute;background-color:transparent;height:0;width:0;bottom:120px}.pagerContainer{margin:40px auto;width:180px}.pager{display:block;height:60px}@media (max-width:700px){.pagerContainer{margin:40px auto;width:150px}.pager{display:block;height:45px}}.pager.inactive{opacity:.15}.pager.left{float:left}.pager.right{float:right}"]
                    },] },
        ];
        /** @nocollapse */
        GalleryComponent.ctorParameters = function () {
            return [
                { type: ImageService },
                { type: http.HttpClient },
                { type: core.ChangeDetectorRef }
            ];
        };
        GalleryComponent.propDecorators = {
            providedImageMargin: [{ type: core.Input, args: ['flexBorderSize',] }],
            providedImageSize: [{ type: core.Input, args: ['flexImageSize',] }],
            providedGalleryName: [{ type: core.Input, args: ['galleryName',] }],
            providedMetadataUri: [{ type: core.Input, args: ['metadataUri',] }],
            rowsPerPage: [{ type: core.Input, args: ['maxRowsPerPage',] }],
            viewerChange: [{ type: core.Output }],
            galleryContainer: [{ type: core.ViewChild, args: ['galleryContainer',] }],
            imageElements: [{ type: core.ViewChildren, args: ['imageElement',] }],
            triggerCycle: [{ type: core.HostListener, args: ['window:scroll', ['$event'],] }],
            windowResize: [{ type: core.HostListener, args: ['window:resize', ['$event'],] }]
        };
        return GalleryComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ViewerComponent = /** @class */ (function () {
        function ViewerComponent(imageService) {
            var _this = this;
            this.imageService = imageService;
            this.images = [{}];
            this.currentIdx = 0;
            this.leftArrowVisible = true;
            this.rightArrowVisible = true;
            this.categorySelected = 'preview_xxs';
            this.qualitySelectorShown = false;
            this.qualitySelected = 'auto';
            imageService.imagesUpdated$.subscribe(function (images) {
                _this.images = images;
            });
            imageService.imageSelectedIndexUpdated$.subscribe(function (newIndex) {
                _this.currentIdx = newIndex;
                _this.images.forEach(function (image) { return image['active'] = false; });
                _this.images[_this.currentIdx]['active'] = true;
                _this.transform = 0;
                _this.updateQuality();
            });
            imageService.showImageViewerChanged$.subscribe(function (showViewer) {
                _this.showViewer = showViewer;
            });
            this.math = Math;
        }
        Object.defineProperty(ViewerComponent.prototype, "leftArrowActive", {
            get: /**
             * @return {?}
             */ function () {
                return this.currentIdx > 0;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ViewerComponent.prototype, "rightArrowActive", {
            get: /**
             * @return {?}
             */ function () {
                return this.currentIdx < this.images.length - 1;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} swipe
         * @return {?}
         */
        ViewerComponent.prototype.pan = /**
         * @param {?} swipe
         * @return {?}
         */
            function (swipe) {
                this.transform = swipe.deltaX;
            };
        /**
         * @return {?}
         */
        ViewerComponent.prototype.onResize = /**
         * @return {?}
         */
            function () {
                this.images.forEach(function (image) {
                    image['viewerImageLoaded'] = false;
                    image['active'] = false;
                });
                this.updateImage();
            };
        /**
         * @return {?}
         */
        ViewerComponent.prototype.showQualitySelector = /**
         * @return {?}
         */
            function () {
                this.qualitySelectorShown = !this.qualitySelectorShown;
            };
        /**
         * @param {?} newQuality
         * @return {?}
         */
        ViewerComponent.prototype.qualityChanged = /**
         * @param {?} newQuality
         * @return {?}
         */
            function (newQuality) {
                this.qualitySelected = newQuality;
                this.updateImage();
            };
        /**
         * @param {?} image
         * @return {?}
         */
        ViewerComponent.prototype.imageLoaded = /**
         * @param {?} image
         * @return {?}
         */
            function (image) {
                image['viewerImageLoaded'] = true;
            };
        /**
         * direction (-1: left, 1: right)
         * swipe (user swiped)
         */
        /**
         * direction (-1: left, 1: right)
         * swipe (user swiped)
         * @param {?} direction
         * @param {?} swipe
         * @return {?}
         */
        ViewerComponent.prototype.navigate = /**
         * direction (-1: left, 1: right)
         * swipe (user swiped)
         * @param {?} direction
         * @param {?} swipe
         * @return {?}
         */
            function (direction, swipe) {
                if ((direction === 1 && this.currentIdx < this.images.length - 1) ||
                    (direction === -1 && this.currentIdx > 0)) {
                    if (direction == -1) {
                        this.images[this.currentIdx]['transition'] = 'leaveToRight';
                        this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft';
                    }
                    else {
                        this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                        this.images[this.currentIdx + 1]['transition'] = 'enterFromRight';
                    }
                    this.currentIdx += direction;
                    if (swipe) {
                        this.hideNavigationArrows();
                    }
                    else {
                        this.showNavigationArrows();
                    }
                    this.updateImage();
                }
            };
        /**
         * @return {?}
         */
        ViewerComponent.prototype.showNavigationArrows = /**
         * @return {?}
         */
            function () {
                this.leftArrowVisible = true;
                this.rightArrowVisible = true;
            };
        /**
         * @return {?}
         */
        ViewerComponent.prototype.closeViewer = /**
         * @return {?}
         */
            function () {
                this.images.forEach(function (image) { return image['transition'] = undefined; });
                this.images.forEach(function (image) { return image['active'] = false; });
                this.imageService.showImageViewer(false);
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ViewerComponent.prototype.onKeydown = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                /** @type {?} */
                var prevent = [37, 39, 27, 36, 35]
                    .find(function (no) { return no === event.keyCode; });
                if (prevent) {
                    event.preventDefault();
                }
                switch (prevent) {
                    case 37:
                        // navigate left
                        this.navigate(-1, false);
                        break;
                    case 39:
                        // navigate right
                        this.navigate(1, false);
                        break;
                    case 27:
                        // esc
                        this.closeViewer();
                        break;
                    case 36:
                        // pos 1
                        this.images[this.currentIdx]['transition'] = 'leaveToRight';
                        this.currentIdx = 0;
                        this.images[this.currentIdx]['transition'] = 'enterFromLeft';
                        this.updateImage();
                        break;
                    case 35:
                        // end
                        this.images[this.currentIdx]['transition'] = 'leaveToLeft';
                        this.currentIdx = this.images.length - 1;
                        this.images[this.currentIdx]['transition'] = 'enterFromRight';
                        this.updateImage();
                        break;
                    default:
                        break;
                }
            };
        /**
         * @private
         * @return {?}
         */
        ViewerComponent.prototype.hideNavigationArrows = /**
         * @private
         * @return {?}
         */
            function () {
                this.leftArrowVisible = false;
                this.rightArrowVisible = false;
            };
        /**
         * @private
         * @return {?}
         */
        ViewerComponent.prototype.updateImage = /**
         * @private
         * @return {?}
         */
            function () {
                var _this = this;
                // wait for animation to end
                setTimeout(function () {
                    _this.updateQuality();
                    _this.images[_this.currentIdx]['active'] = true;
                    _this.images.forEach(function (image) {
                        if (image != _this.images[_this.currentIdx]) {
                            image['active'] = false;
                            _this.transform = 0;
                        }
                    });
                }, 500);
            };
        /**
         * @private
         * @return {?}
         */
        ViewerComponent.prototype.updateQuality = /**
         * @private
         * @return {?}
         */
            function () {
                /** @type {?} */
                var screenWidth = window.innerWidth;
                /** @type {?} */
                var screenHeight = window.innerHeight;
                switch (this.qualitySelected) {
                    case 'auto': {
                        this.categorySelected = 'preview_xxs';
                        if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width &&
                            screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {
                            this.categorySelected = 'preview_xs';
                        }
                        if (screenWidth > this.images[this.currentIdx]['preview_xs'].width &&
                            screenHeight > this.images[this.currentIdx]['preview_xs'].height) {
                            this.categorySelected = 'preview_s';
                        }
                        if (screenWidth > this.images[this.currentIdx]['preview_s'].width &&
                            screenHeight > this.images[this.currentIdx]['preview_s'].height) {
                            this.categorySelected = 'preview_m';
                        }
                        if (screenWidth > this.images[this.currentIdx]['preview_m'].width &&
                            screenHeight > this.images[this.currentIdx]['preview_m'].height) {
                            this.categorySelected = 'preview_l';
                        }
                        if (screenWidth > this.images[this.currentIdx]['preview_l'].width &&
                            screenHeight > this.images[this.currentIdx]['preview_l'].height) {
                            this.categorySelected = 'preview_xl';
                        }
                        if (screenWidth > this.images[this.currentIdx]['preview_xl'].width &&
                            screenHeight > this.images[this.currentIdx]['preview_xl'].height) {
                            this.categorySelected = 'raw';
                        }
                        break;
                    }
                    case 'low': {
                        this.categorySelected = 'preview_xxs';
                        break;
                    }
                    case 'mid': {
                        this.categorySelected = 'preview_m';
                        break;
                    }
                    case 'high': {
                        this.categorySelected = 'raw';
                        break;
                    }
                    default: {
                        this.categorySelected = 'preview_m';
                    }
                }
            };
        ViewerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'viewer',
                        template: "<div class=\"outerContainer\" (window:resize)=\"onResize()\" *ngIf=\"showViewer\" [@showViewerTransition]=\"showViewer\">\n\n\n    <img [ngClass]=\"{'activeArrow': leftArrowActive}\" class=\"arrow left\"\n         src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\n         [hidden]=\"!leftArrowVisible\" (click)=\"navigate(-1, false)\"/>\n    <img [ngClass]=\"{'activeArrow': rightArrowActive}\" class=\"arrow right\"\n         src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\n         [hidden]=\"!rightArrowVisible\" (click)=\"navigate(1, false)\"/>\n\n    <div class=\"buttonContainer\">\n        <img class=\"action close\"\n             src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg==\"\n             (click)=\"closeViewer()\"/>\n    </div>\n\n    <div class=\"imageContainer\"\n         (click)=\"showNavigationArrows()\"\n         (swipeleft)=\"navigate(1, $event)\"\n         (swiperight)=\"navigate(-1, $event)\"\n         (pan)=\"pan($event)\">\n\n        <div *ngFor='let img of images; let j = index'\n             class=\"image\"\n             [class.active]=\"img['active']\"\n             [style.background-image]=\"img['viewerImageLoaded'] ? 'url('+img[categorySelected]['path']+')' : math.abs(currentIdx-j) <=1 ? 'url('+img['preview_xxs']['path']+')' : ''\"\n             [style.left]=\"transform+'px'\"\n             [@imageTransition]=\"img['transition']\"></div>\n\n        <img *ngFor='let img of images; let j = index'\n             class=\"preloading-image\"\n             (load)=\"imageLoaded(img)\"\n             src=\"{{ math.abs(currentIdx-j) <=1 ? img[categorySelected]['path'] : ''}}\"/>\n    </div>\n</div>\n\n",
                        styles: [".outerContainer{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer .image,.imageContainer .preloading-image{visibility:hidden}.imageContainer .image.active{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow{opacity:0}.arrow:hover{cursor:pointer}.outerContainer:hover .arrow.activeArrow{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:all ease-out .5s}.arrow.left{left:2vw}.arrow.right{right:2vw}.arrow:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:all ease-out .5s}.buttonContainer{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}.buttonContainer .action{height:100%;cursor:pointer;vertical-align:top}.buttonContainer .action:focus{outline:0}.buttonContainer .action:hover{background-color:#222;transition:all ease-out .3s}.buttonContainer .action.close{width:26px;height:26px}md-button-toggle.checked{background-color:#a0a0a0}.menuButton{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:all ease-out .5s}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}"],
                        host: {
                            '(document:keydown)': 'onKeydown($event)'
                        },
                        animations: [
                            animations.trigger('imageTransition', [
                                animations.state('enterFromRight', animations.style({
                                    opacity: 1,
                                    transform: 'translate(0px, 0px)'
                                })),
                                animations.state('enterFromLeft', animations.style({
                                    opacity: 1,
                                    transform: 'translate(0px, 0px)'
                                })),
                                animations.state('leaveToLeft', animations.style({
                                    opacity: 0,
                                    transform: 'translate(-100px, 0px)'
                                })),
                                animations.state('leaveToRight', animations.style({
                                    opacity: 0,
                                    transform: 'translate(100px, 0px)'
                                })),
                                animations.transition('* => enterFromRight', [
                                    animations.style({
                                        opacity: 0,
                                        transform: 'translate(30px, 0px)'
                                    }),
                                    animations.animate('250ms 500ms ease-in')
                                ]),
                                animations.transition('* => enterFromLeft', [
                                    animations.style({
                                        opacity: 0,
                                        transform: 'translate(-30px, 0px)'
                                    }),
                                    animations.animate('250ms 500ms ease-in')
                                ]),
                                animations.transition('* => leaveToLeft', [
                                    animations.style({
                                        opacity: 1
                                    }),
                                    animations.animate('250ms ease-out')
                                ]),
                                animations.transition('* => leaveToRight', [
                                    animations.style({
                                        opacity: 1
                                    }),
                                    animations.animate('250ms ease-out')
                                ])
                            ]),
                            animations.trigger('showViewerTransition', [
                                animations.state('true', animations.style({
                                    opacity: 1
                                })),
                                animations.state('void', animations.style({
                                    opacity: 0
                                })),
                                animations.transition('void => *', [
                                    animations.style({
                                        opacity: 0
                                    }),
                                    animations.animate('1000ms ease-in')
                                ]),
                                animations.transition('* => void', [
                                    animations.style({
                                        opacity: 1
                                    }),
                                    animations.animate('500ms ease-out')
                                ])
                            ])
                        ]
                    },] },
        ];
        /** @nocollapse */
        ViewerComponent.ctorParameters = function () {
            return [
                { type: ImageService }
            ];
        };
        return ViewerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var Angular2ImageGalleryModule = /** @class */ (function () {
        function Angular2ImageGalleryModule() {
        }
        Angular2ImageGalleryModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            http.HttpClientModule,
                            animations$1.BrowserAnimationsModule
                        ],
                        declarations: [
                            GalleryComponent,
                            ViewerComponent
                        ],
                        providers: [
                            ImageService
                        ],
                        exports: [
                            GalleryComponent,
                            ViewerComponent
                        ]
                    },] },
        ];
        return Angular2ImageGalleryModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.ImageService = ImageService;
    exports.GalleryComponent = GalleryComponent;
    exports.ViewerComponent = ViewerComponent;
    exports.Angular2ImageGalleryModule = Angular2ImageGalleryModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItaW1hZ2UtZ2FsbGVyeS51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvbGliL3NlcnZpY2VzL2ltYWdlLnNlcnZpY2UudHMiLCJuZzovL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvbGliL2dhbGxlcnkvZ2FsbGVyeS5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvbGliL3ZpZXdlci92aWV3ZXIuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi1pbWFnZS1nYWxsZXJ5L2xpYi9hbmd1bGFyMi1pbWFnZS1nYWxsZXJ5Lm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJ1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgSW1hZ2VTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGltYWdlc1VwZGF0ZWRTb3VyY2UgPSBuZXcgU3ViamVjdDxBcnJheTxhbnk+PigpXG4gICAgcHJpdmF0ZSBpbWFnZVNlbGVjdGVkSW5kZXhVcGRhdGVkU291cmNlID0gbmV3IFN1YmplY3Q8bnVtYmVyPigpXG4gICAgcHJpdmF0ZSBzaG93SW1hZ2VWaWV3ZXJTb3VyY2UgPSBuZXcgU3ViamVjdDxib29sZWFuPigpXG5cbiAgICBpbWFnZXNVcGRhdGVkJDogT2JzZXJ2YWJsZTxBcnJheTxhbnk+PiA9IHRoaXMuaW1hZ2VzVXBkYXRlZFNvdXJjZS5hc09ic2VydmFibGUoKVxuICAgIGltYWdlU2VsZWN0ZWRJbmRleFVwZGF0ZWQkOiBPYnNlcnZhYmxlPG51bWJlcj4gPSB0aGlzLmltYWdlU2VsZWN0ZWRJbmRleFVwZGF0ZWRTb3VyY2UuYXNPYnNlcnZhYmxlKClcbiAgICBzaG93SW1hZ2VWaWV3ZXJDaGFuZ2VkJDogT2JzZXJ2YWJsZTxib29sZWFuPiA9IHRoaXMuc2hvd0ltYWdlVmlld2VyU291cmNlLmFzT2JzZXJ2YWJsZSgpXG5cbiAgICB1cGRhdGVJbWFnZXMoaW1hZ2VzOiBBcnJheTxhbnk+KTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VzVXBkYXRlZFNvdXJjZS5uZXh0KGltYWdlcylcbiAgICB9XG5cbiAgICB1cGRhdGVTZWxlY3RlZEltYWdlSW5kZXgobmV3SW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmltYWdlU2VsZWN0ZWRJbmRleFVwZGF0ZWRTb3VyY2UubmV4dChuZXdJbmRleClcbiAgICB9XG5cbiAgICBzaG93SW1hZ2VWaWV3ZXIoc2hvdzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLnNob3dJbWFnZVZpZXdlclNvdXJjZS5uZXh0KHNob3cpXG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsXG4gIElucHV0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsIFF1ZXJ5TGlzdCwgU2ltcGxlQ2hhbmdlcywgVmlld0NoaWxkLCBWaWV3Q2hpbGRyZW5cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IEltYWdlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2ltYWdlLnNlcnZpY2UnXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzL2ludGVybmFsL1N1YnNjcmlwdGlvbidcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCdcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdnYWxsZXJ5JyxcbiAgICB0ZW1wbGF0ZTogYDxkaXYgI2dhbGxlcnlDb250YWluZXIgY2xhc3M9XCJnYWxsZXJ5Q29udGFpbmVyXCI+XG4gICAgPGRpdiBjbGFzcz1cImlubmVyR2FsbGVyeUNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2ICpuZ0Zvcj0nbGV0IGltZ3JvdyBvZiBnYWxsZXJ5IHwgc2xpY2U6cm93SW5kZXg6cm93SW5kZXgrcm93c1BlclBhZ2U7IGxldCBpID0gaW5kZXgnXG4gICAgICAgICAgICAgY2xhc3M9XCJpbWFnZXJvd1wiXG4gICAgICAgICAgICAgW3N0eWxlLm1hcmdpbi1ib3R0b20ucHhdPVwiY2FsY0ltYWdlTWFyZ2luKClcIj5cbiAgICAgICAgICAgIDxpbWcgI2ltYWdlRWxlbWVudFxuICAgICAgICAgICAgICAgICAqbmdGb3I9J2xldCBpbWcgb2YgaW1ncm93OyBsZXQgaiA9IGluZGV4J1xuICAgICAgICAgICAgICAgICBjbGFzcz1cInRodW1ibmFpbFwiXG4gICAgICAgICAgICAgICAgIFtzdHlsZS53aWR0aC5weF09XCJpbWdbJ3dpZHRoJ11cIlxuICAgICAgICAgICAgICAgICBbc3R5bGUuaGVpZ2h0LnB4XT1cImltZ1snaGVpZ2h0J11cIlxuICAgICAgICAgICAgICAgICAoY2xpY2spPVwib3BlbkltYWdlVmlld2VyKGltZylcIlxuICAgICAgICAgICAgICAgICBbc3JjXT1cImltZ1snc3JjQWZ0ZXJGb2N1cyddXCJcbiAgICAgICAgICAgICAgICAgW3N0eWxlLmJhY2tncm91bmRdPVwiaW1nLmRvbWluYW50Q29sb3JcIlxuICAgICAgICAgICAgICAgICBbc3R5bGUubWFyZ2luLXJpZ2h0LnB4XT1cImNhbGNJbWFnZU1hcmdpbigpXCIvPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJwYWdlckNvbnRhaW5lclwiICpuZ0lmPVwiKCFyaWdodEFycm93SW5hY3RpdmUgfHwgIWxlZnRBcnJvd0luYWN0aXZlKVwiPlxuICAgICAgICA8aW1nIFtuZ0NsYXNzXT1cInsnaW5hY3RpdmUnOiBsZWZ0QXJyb3dJbmFjdGl2ZX1cIiBjbGFzcz1cInBhZ2VyIGxlZnRcIlxuICAgICAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlBL1BqeHpkbWNnYVdROUlreGhlV1Z5WHpFaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURRNElEUTRPeUlnZG1WeWMybHZiajBpTVM0eElpQjJhV1YzUW05NFBTSXdJREFnTkRnZ05EZ2lJSGh0YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lQanhuUGp4d1lYUm9JR1E5SWsweU5DdzBOa014TVM0NUxEUTJMRElzTXpZdU1Td3lMREkwVXpFeExqa3NNaXd5TkN3eWN6SXlMRGt1T1N3eU1pd3lNbE16Tmk0eExEUTJMREkwTERRMmVpQk5NalFzTkVNeE15dzBMRFFzTVRNc05Dd3lOR013TERFeExEa3NNakFzTWpBc01qQWdJQ0JqTVRFc01Dd3lNQzA1TERJd0xUSXdRelEwTERFekxETTFMRFFzTWpRc05Ib2lMejQ4TDJjK1BHYytQSEJ2YkhsbmIyNGdjRzlwYm5SelBTSXlOeTQyTERNMkxqY2dNVFF1T1N3eU5DQXlOeTQyTERFeExqTWdNamt1TVN3eE1pNDNJREUzTGpnc01qUWdNamt1TVN3ek5TNHpJQ0FpTHo0OEwyYytQQzl6ZG1jK1wiXG4gICAgICAgICAgICAgKGNsaWNrKT1cIm5hdmlnYXRlKC0xKVwiLz5cbiAgICAgICAgPGltZyBbbmdDbGFzc109XCJ7J2luYWN0aXZlJzogcmlnaHRBcnJvd0luYWN0aXZlfVwiIGNsYXNzPVwicGFnZXIgcmlnaHRcIlxuICAgICAgICAgICAgIHNyYz1cImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlBL1BqeHpkbWNnYVdROUlreGhlV1Z5WHpFaUlITjBlV3hsUFNKbGJtRmliR1V0WW1GamEyZHliM1Z1WkRwdVpYY2dNQ0F3SURRNElEUTRPeUlnZG1WeWMybHZiajBpTVM0eElpQjJhV1YzUW05NFBTSXdJREFnTkRnZ05EZ2lJSGh0YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lQanhuUGp4d1lYUm9JR1E5SWsweU5DdzBOa014TVM0NUxEUTJMRElzTXpZdU1Td3lMREkwVXpFeExqa3NNaXd5TkN3eWN6SXlMRGt1T1N3eU1pd3lNbE16Tmk0eExEUTJMREkwTERRMmVpQk5NalFzTkVNeE15dzBMRFFzTVRNc05Dd3lOSE01TERJd0xESXdMREl3Y3pJd0xUa3NNakF0TWpBZ0lDQlRNelVzTkN3eU5DdzBlaUl2UGp3dlp6NDhaejQ4Y0c5c2VXZHZiaUJ3YjJsdWRITTlJakl4TGpRc016WXVOeUF4T1M0NUxETTFMak1nTXpFdU1pd3lOQ0F4T1M0NUxERXlMamNnTWpFdU5Dd3hNUzR6SURNMExqRXNNalFnSUNJdlBqd3ZaejQ4TDNOMlp6ND1cIlxuICAgICAgICAgICAgIChjbGljayk9XCJuYXZpZ2F0ZSgxKVwiLz5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48dmlld2VyPjwvdmlld2VyPlxuYCxcbiAgICBzdHlsZXM6IFtgLmlubmVyR2FsbGVyeUNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZX0uZ2FsbGVyeUNvbnRhaW5lcntoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OmhpZGRlbn0uaW5uZXJHYWxsZXJ5Q29udGFpbmVyIGltZzpsYXN0LWNoaWxke21hcmdpbi1yaWdodDotMXB4IWltcG9ydGFudH0uZ2FsbGVyeUNvbnRhaW5lciBpbWc6aG92ZXJ7LXdlYmtpdC1maWx0ZXI6YnJpZ2h0bmVzcyg1MCUpO2ZpbHRlcjpicmlnaHRuZXNzKDUwJSk7dHJhbnNpdGlvbjphbGwgZWFzZS1vdXQgLjJzO2N1cnNvcjpwb2ludGVyfS5pbWFnZXJvd3ttYXJnaW4tcmlnaHQ6MXB4O292ZXJmbG93OmhpZGRlbjtkaXNwbGF5OmZsZXh9Ojotd2Via2l0LXNjcm9sbGJhcntkaXNwbGF5Om5vbmV9LmFzeW5jTG9hZGluZ0NvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2hlaWdodDowO3dpZHRoOjA7Ym90dG9tOjEyMHB4fS5wYWdlckNvbnRhaW5lcnttYXJnaW46NDBweCBhdXRvO3dpZHRoOjE4MHB4fS5wYWdlcntkaXNwbGF5OmJsb2NrO2hlaWdodDo2MHB4fUBtZWRpYSAobWF4LXdpZHRoOjcwMHB4KXsucGFnZXJDb250YWluZXJ7bWFyZ2luOjQwcHggYXV0bzt3aWR0aDoxNTBweH0ucGFnZXJ7ZGlzcGxheTpibG9jaztoZWlnaHQ6NDVweH19LnBhZ2VyLmluYWN0aXZle29wYWNpdHk6LjE1fS5wYWdlci5sZWZ0e2Zsb2F0OmxlZnR9LnBhZ2VyLnJpZ2h0e2Zsb2F0OnJpZ2h0fWBdXG59KVxuZXhwb3J0IGNsYXNzIEdhbGxlcnlDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgT25DaGFuZ2VzIHtcbiAgICBnYWxsZXJ5OiBBcnJheTxhbnk+ID0gW11cbiAgICBpbWFnZURhdGFTdGF0aWNQYXRoOiBzdHJpbmcgPSAnYXNzZXRzL2ltZy9nYWxsZXJ5LydcbiAgICBpbWFnZURhdGFDb21wbGV0ZVBhdGg6IHN0cmluZyA9ICcnXG4gICAgZGF0YUZpbGVOYW1lOiBzdHJpbmcgPSAnZGF0YS5qc29uJ1xuICAgIGltYWdlczogQXJyYXk8YW55PiA9IFtdXG4gICAgbWluaW1hbFF1YWxpdHlDYXRlZ29yeSA9ICdwcmV2aWV3X3h4cydcbiAgICB2aWV3ZXJTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvblxuICAgIHJvd0luZGV4OiBudW1iZXIgPSAwXG4gICAgcmlnaHRBcnJvd0luYWN0aXZlOiBib29sZWFuID0gZmFsc2VcbiAgICBsZWZ0QXJyb3dJbmFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlXG5cbiAgICBASW5wdXQoJ2ZsZXhCb3JkZXJTaXplJykgcHJvdmlkZWRJbWFnZU1hcmdpbjogbnVtYmVyID0gM1xuICAgIEBJbnB1dCgnZmxleEltYWdlU2l6ZScpIHByb3ZpZGVkSW1hZ2VTaXplOiBudW1iZXIgPSA3XG4gICAgQElucHV0KCdnYWxsZXJ5TmFtZScpIHByb3ZpZGVkR2FsbGVyeU5hbWU6IHN0cmluZyA9ICcnXG4gICAgQElucHV0KCdtZXRhZGF0YVVyaScpIHByb3ZpZGVkTWV0YWRhdGFVcmk6IHN0cmluZyA9IHVuZGVmaW5lZFxuICAgIEBJbnB1dCgnbWF4Um93c1BlclBhZ2UnKSByb3dzUGVyUGFnZTogbnVtYmVyID0gMjAwXG5cbiAgICBAT3V0cHV0KCkgdmlld2VyQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpXG5cbiAgICBAVmlld0NoaWxkKCdnYWxsZXJ5Q29udGFpbmVyJykgZ2FsbGVyeUNvbnRhaW5lcjogRWxlbWVudFJlZlxuICAgIEBWaWV3Q2hpbGRyZW4oJ2ltYWdlRWxlbWVudCcpIGltYWdlRWxlbWVudHM6IFF1ZXJ5TGlzdDxhbnk+XG5cbiAgICBASG9zdExpc3RlbmVyKCd3aW5kb3c6c2Nyb2xsJywgWyckZXZlbnQnXSkgdHJpZ2dlckN5Y2xlKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zY2FsZUdhbGxlcnkoKVxuICAgIH1cblxuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnLCBbJyRldmVudCddKSB3aW5kb3dSZXNpemUoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlcigpXG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHVibGljIGltYWdlU2VydmljZTogSW1hZ2VTZXJ2aWNlLCBwdWJsaWMgaHR0cDogSHR0cENsaWVudCwgcHVibGljIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIH1cblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZldGNoRGF0YUFuZFJlbmRlcigpXG4gICAgICAgIHRoaXMudmlld2VyU3Vic2NyaXB0aW9uID0gdGhpcy5pbWFnZVNlcnZpY2Uuc2hvd0ltYWdlVmlld2VyQ2hhbmdlZCRcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHZpc2liaWxpdHk6IGJvb2xlYW4pID0+IHRoaXMudmlld2VyQ2hhbmdlLmVtaXQodmlzaWJpbGl0eSkpXG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgICAgICAvLyBpbnB1dCBwYXJhbXMgY2hhbmdlZFxuICAgICAgICBpZiAoY2hhbmdlc1sncHJvdmlkZWRHYWxsZXJ5TmFtZSddICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mZXRjaERhdGFBbmRSZW5kZXIoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdlclN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhpcy52aWV3ZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbkltYWdlVmlld2VyKGltZzogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VTZXJ2aWNlLnVwZGF0ZUltYWdlcyh0aGlzLmltYWdlcylcbiAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2UudXBkYXRlU2VsZWN0ZWRJbWFnZUluZGV4KHRoaXMuaW1hZ2VzLmluZGV4T2YoaW1nKSlcbiAgICAgICAgdGhpcy5pbWFnZVNlcnZpY2Uuc2hvd0ltYWdlVmlld2VyKHRydWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlyZWN0aW9uICgtMTogbGVmdCwgMTogcmlnaHQpXG4gICAgICovXG4gICAgbmF2aWdhdGUoZGlyZWN0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKChkaXJlY3Rpb24gPT09IDEgJiYgdGhpcy5yb3dJbmRleCA8IHRoaXMuZ2FsbGVyeS5sZW5ndGggLSB0aGlzLnJvd3NQZXJQYWdlKVxuICAgICAgICAgICAgfHwgKGRpcmVjdGlvbiA9PT0gLTEgJiYgdGhpcy5yb3dJbmRleCA+IDApKSB7XG4gICAgICAgICAgICB0aGlzLnJvd0luZGV4ICs9ICh0aGlzLnJvd3NQZXJQYWdlICogZGlyZWN0aW9uKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcmVzaE5hdmlnYXRpb25FcnJvclN0YXRlKClcbiAgICB9XG5cbiAgICBjYWxjSW1hZ2VNYXJnaW4oKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgZ2FsbGVyeVdpZHRoID0gdGhpcy5nZXRHYWxsZXJ5V2lkdGgoKVxuICAgICAgICBjb25zdCByYXRpbyA9IGdhbGxlcnlXaWR0aCAvIDE5MjBcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5tYXgoMSwgdGhpcy5wcm92aWRlZEltYWdlTWFyZ2luICogcmF0aW8pKVxuICAgIH1cblxuICAgIHByaXZhdGUgZmV0Y2hEYXRhQW5kUmVuZGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmltYWdlRGF0YUNvbXBsZXRlUGF0aCA9IHRoaXMucHJvdmlkZWRNZXRhZGF0YVVyaVxuXG4gICAgICAgIGlmICghdGhpcy5wcm92aWRlZE1ldGFkYXRhVXJpKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlRGF0YUNvbXBsZXRlUGF0aCA9IHRoaXMucHJvdmlkZWRHYWxsZXJ5TmFtZSAhPT0gJycgP1xuICAgICAgICAgICAgICAgIGAke3RoaXMuaW1hZ2VEYXRhU3RhdGljUGF0aCArIHRoaXMucHJvdmlkZWRHYWxsZXJ5TmFtZX0vJHt0aGlzLmRhdGFGaWxlTmFtZX1gIDpcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGF0YVN0YXRpY1BhdGggKyB0aGlzLmRhdGFGaWxlTmFtZVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5odHRwLmdldCh0aGlzLmltYWdlRGF0YUNvbXBsZXRlUGF0aClcbiAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IEFycmF5PGFueT4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZXMgPSBkYXRhXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTZXJ2aWNlLnVwZGF0ZUltYWdlcyh0aGlzLmltYWdlcylcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpbWFnZVsnZ2FsbGVyeUltYWdlTG9hZGVkJ10gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgIGltYWdlWyd2aWV3ZXJJbWFnZUxvYWRlZCddID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICBpbWFnZVsnc3JjQWZ0ZXJGb2N1cyddID0gJydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdpY2UsIHNpbmdsZSBsZWFkcyB0byBkaWZmZXJlbnQgc3RyYW5nZSBicm93c2VyIGJlaGF2aW91clxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm92aWRlZE1ldGFkYXRhVXJpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUHJvdmlkZWQgZW5kcG9pbnQgJyR7dGhpcy5wcm92aWRlZE1ldGFkYXRhVXJpfScgZGlkIG5vdCBzZXJ2ZSBtZXRhZGF0YSBjb3JyZWN0bHkgb3IgaW4gdGhlIGV4cGVjdGVkIGZvcm1hdC5cbiAgICAgIFNlZSBoZXJlIGZvciBtb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vQmVuamFtaW5CcmFuZG1laWVyL2FuZ3VsYXIyLWltYWdlLWdhbGxlcnkvYmxvYi9tYXN0ZXIvZG9jcy9leHRlcm5hbERhdGFTb3VyY2UubWQsXG4gICAgICBPcmlnaW5hbCBlcnJvcjogJHtlcnJ9YClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYERpZCB5b3UgcnVuIHRoZSBjb252ZXJ0IHNjcmlwdCBmcm9tIGFuZ3VsYXIyLWltYWdlLWdhbGxlcnkgZm9yIHlvdXIgaW1hZ2VzIGZpcnN0PyBPcmlnaW5hbCBlcnJvcjogJHtlcnJ9YClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKCkgPT4gdW5kZWZpbmVkKVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbGxlcnkgPSBbXVxuXG4gICAgICAgIGxldCB0ZW1wUm93ID0gW3RoaXMuaW1hZ2VzWzBdXVxuICAgICAgICBsZXQgY3VycmVudFJvd0luZGV4ID0gMFxuICAgICAgICBsZXQgaSA9IDBcblxuICAgICAgICBmb3IgKGk7IGkgPCB0aGlzLmltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuaW1hZ2VzW2kgKyAxXSAmJiB0aGlzLnNob3VsZEFkZENhbmRpZGF0ZSh0ZW1wUm93LCB0aGlzLmltYWdlc1tpICsgMV0pKSB7XG4gICAgICAgICAgICAgICAgaSsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZXNbaSArIDFdKSB7XG4gICAgICAgICAgICAgICAgdGVtcFJvdy5wb3AoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nYWxsZXJ5W2N1cnJlbnRSb3dJbmRleCsrXSA9IHRlbXBSb3dcblxuICAgICAgICAgICAgdGVtcFJvdyA9IFt0aGlzLmltYWdlc1tpICsgMV1dXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNjYWxlR2FsbGVyeSgpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG91bGRBZGRDYW5kaWRhdGUoaW1nUm93OiBBcnJheTxhbnk+LCBjYW5kaWRhdGU6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBvbGREaWZmZXJlbmNlID0gdGhpcy5jYWxjSWRlYWxIZWlnaHQoKSAtIHRoaXMuY2FsY1Jvd0hlaWdodChpbWdSb3cpXG4gICAgICAgIGltZ1Jvdy5wdXNoKGNhbmRpZGF0ZSlcbiAgICAgICAgY29uc3QgbmV3RGlmZmVyZW5jZSA9IHRoaXMuY2FsY0lkZWFsSGVpZ2h0KCkgLSB0aGlzLmNhbGNSb3dIZWlnaHQoaW1nUm93KVxuXG4gICAgICAgIHJldHVybiBNYXRoLmFicyhvbGREaWZmZXJlbmNlKSA+IE1hdGguYWJzKG5ld0RpZmZlcmVuY2UpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjUm93SGVpZ2h0KGltZ1JvdzogQXJyYXk8YW55Pik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsUm93V2lkdGggPSB0aGlzLmNhbGNPcmlnaW5hbFJvd1dpZHRoKGltZ1JvdylcblxuICAgICAgICBjb25zdCByYXRpbyA9ICh0aGlzLmdldEdhbGxlcnlXaWR0aCgpIC0gKGltZ1Jvdy5sZW5ndGggLSAxKSAqIHRoaXMuY2FsY0ltYWdlTWFyZ2luKCkpIC8gb3JpZ2luYWxSb3dXaWR0aFxuICAgICAgICBjb25zdCByb3dIZWlnaHQgPSBpbWdSb3dbMF1bdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnaGVpZ2h0J10gKiByYXRpb1xuXG4gICAgICAgIHJldHVybiByb3dIZWlnaHRcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGNPcmlnaW5hbFJvd1dpZHRoKGltZ1JvdzogQXJyYXk8YW55Pik6IG51bWJlciB7XG4gICAgICAgIGxldCBvcmlnaW5hbFJvd1dpZHRoID0gMFxuICAgICAgICBpbWdSb3cuZm9yRWFjaChpbWcgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kaXZpZHVhbFJhdGlvID0gdGhpcy5jYWxjSWRlYWxIZWlnaHQoKSAvIGltZ1t0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWydoZWlnaHQnXVxuICAgICAgICAgICAgaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ3dpZHRoJ10gPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXSAqIGluZGl2aWR1YWxSYXRpb1xuICAgICAgICAgICAgaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ2hlaWdodCddID0gdGhpcy5jYWxjSWRlYWxIZWlnaHQoKVxuICAgICAgICAgICAgb3JpZ2luYWxSb3dXaWR0aCArPSBpbWdbdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5XVsnd2lkdGgnXVxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiBvcmlnaW5hbFJvd1dpZHRoXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjSWRlYWxIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R2FsbGVyeVdpZHRoKCkgLyAoODAgLyB0aGlzLnByb3ZpZGVkSW1hZ2VTaXplKSArIDEwMFxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0R2FsbGVyeVdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLmdhbGxlcnlDb250YWluZXIubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gZm9yIElFMTFcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdhbGxlcnlDb250YWluZXIubmF0aXZlRWxlbWVudC5zY3JvbGxXaWR0aFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdhbGxlcnlDb250YWluZXIubmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aFxuICAgIH1cblxuICAgIHByaXZhdGUgc2NhbGVHYWxsZXJ5KCk6IHZvaWQge1xuICAgICAgICBsZXQgaW1hZ2VDb3VudGVyID0gMFxuICAgICAgICBsZXQgbWF4aW11bUdhbGxlcnlJbWFnZUhlaWdodCA9IDBcblxuICAgICAgICB0aGlzLmdhbGxlcnkuc2xpY2UodGhpcy5yb3dJbmRleCwgdGhpcy5yb3dJbmRleCArIHRoaXMucm93c1BlclBhZ2UpXG4gICAgICAgICAgLmZvckVhY2goaW1nUm93ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUm93V2lkdGggPSB0aGlzLmNhbGNPcmlnaW5hbFJvd1dpZHRoKGltZ1JvdylcblxuICAgICAgICAgICAgaWYgKGltZ1JvdyAhPT0gdGhpcy5nYWxsZXJ5W3RoaXMuZ2FsbGVyeS5sZW5ndGggLSAxXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gKHRoaXMuZ2V0R2FsbGVyeVdpZHRoKCkgLSAoaW1nUm93Lmxlbmd0aCAtIDEpICogdGhpcy5jYWxjSW1hZ2VNYXJnaW4oKSkgLyBvcmlnaW5hbFJvd1dpZHRoXG5cbiAgICAgICAgICAgICAgICBpbWdSb3cuZm9yRWFjaCgoaW1nOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW1nWyd3aWR0aCddID0gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ3dpZHRoJ10gKiByYXRpb1xuICAgICAgICAgICAgICAgICAgICBpbWdbJ2hlaWdodCddID0gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ2hlaWdodCddICogcmF0aW9cbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bUdhbGxlcnlJbWFnZUhlaWdodCA9IE1hdGgubWF4KG1heGltdW1HYWxsZXJ5SW1hZ2VIZWlnaHQsIGltZ1snaGVpZ2h0J10pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JBc3luY0xvYWRpbmcoaW1nLCBpbWFnZUNvdW50ZXIrKylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbWdSb3cuZm9yRWFjaCgoaW1nOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW1nLndpZHRoID0gaW1nW3RoaXMubWluaW1hbFF1YWxpdHlDYXRlZ29yeV1bJ3dpZHRoJ11cbiAgICAgICAgICAgICAgICAgICAgaW1nLmhlaWdodCA9IGltZ1t0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWydoZWlnaHQnXVxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtR2FsbGVyeUltYWdlSGVpZ2h0ID0gTWF0aC5tYXgobWF4aW11bUdhbGxlcnlJbWFnZUhlaWdodCwgaW1nWydoZWlnaHQnXSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja0ZvckFzeW5jTG9hZGluZyhpbWcsIGltYWdlQ291bnRlcisrKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5taW5pbWFsUXVhbGl0eUNhdGVnb3J5ID0gbWF4aW11bUdhbGxlcnlJbWFnZUhlaWdodCA+IDM3NSA/ICdwcmV2aWV3X3hzJyA6ICdwcmV2aWV3X3h4cydcbiAgICAgICAgdGhpcy5yZWZyZXNoTmF2aWdhdGlvbkVycm9yU3RhdGUoKVxuXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja0ZvckFzeW5jTG9hZGluZyhpbWFnZTogYW55LCBpbWFnZUNvdW50ZXI6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBpbWFnZUVsZW1lbnRzID0gdGhpcy5pbWFnZUVsZW1lbnRzLnRvQXJyYXkoKVxuXG4gICAgICAgIGlmIChpbWFnZVsnZ2FsbGVyeUltYWdlTG9hZGVkJ10gfHxcbiAgICAgICAgICAgIChpbWFnZUVsZW1lbnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50c1tpbWFnZUNvdW50ZXJdICYmXG4gICAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxlZEludG9WaWV3KGltYWdlRWxlbWVudHNbaW1hZ2VDb3VudGVyXS5uYXRpdmVFbGVtZW50KSkpIHtcbiAgICAgICAgICAgIGltYWdlWydnYWxsZXJ5SW1hZ2VMb2FkZWQnXSA9IHRydWVcbiAgICAgICAgICAgIGltYWdlWydzcmNBZnRlckZvY3VzJ10gPSBpbWFnZVt0aGlzLm1pbmltYWxRdWFsaXR5Q2F0ZWdvcnldWydwYXRoJ11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGltYWdlWydzcmNBZnRlckZvY3VzJ10gPSAnJ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Njcm9sbGVkSW50b1ZpZXcoZWxlbWVudDogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRUb3AgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcFxuICAgICAgICBjb25zdCBlbGVtZW50Qm90dG9tID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b21cblxuICAgICAgICByZXR1cm4gZWxlbWVudFRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJiBlbGVtZW50Qm90dG9tID49IDAgJiYgKGVsZW1lbnRCb3R0b20gPiAwIHx8IGVsZW1lbnRUb3AgPiAwKVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVmcmVzaE5hdmlnYXRpb25FcnJvclN0YXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxlZnRBcnJvd0luYWN0aXZlID0gdGhpcy5yb3dJbmRleCA9PSAwXG4gICAgICAgIHRoaXMucmlnaHRBcnJvd0luYWN0aXZlID0gdGhpcy5yb3dJbmRleCA+ICh0aGlzLmdhbGxlcnkubGVuZ3RoIC0gdGhpcy5yb3dzUGVyUGFnZSlcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbWFnZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9pbWFnZS5zZXJ2aWNlJ1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IGFuaW1hdGUsIHN0YXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnXG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndmlld2VyJyxcbiAgICB0ZW1wbGF0ZTogYDxkaXYgY2xhc3M9XCJvdXRlckNvbnRhaW5lclwiICh3aW5kb3c6cmVzaXplKT1cIm9uUmVzaXplKClcIiAqbmdJZj1cInNob3dWaWV3ZXJcIiBbQHNob3dWaWV3ZXJUcmFuc2l0aW9uXT1cInNob3dWaWV3ZXJcIj5cblxuXG4gICAgPGltZyBbbmdDbGFzc109XCJ7J2FjdGl2ZUFycm93JzogbGVmdEFycm93QWN0aXZlfVwiIGNsYXNzPVwiYXJyb3cgbGVmdFwiXG4gICAgICAgICBzcmM9XCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJvWldsbmFIUTlJakkwY0hnaUlIWmxjbk5wYjI0OUlqRXVNU0lnZG1sbGQwSnZlRDBpTUNBd0lESTBJREkwSWlCM2FXUjBhRDBpTWpSd2VDSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQjRiV3h1Y3pwemEyVjBZMmc5SW1oMGRIQTZMeTkzZDNjdVltOW9aVzFwWVc1amIyUnBibWN1WTI5dEwzTnJaWFJqYUM5dWN5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBqeDBhWFJzWlM4K1BHUmxjMk12UGlBZ0lEeG5JR1pwYkd3OUltNXZibVVpSUdacGJHd3RjblZzWlQwaVpYWmxibTlrWkNJZ2FXUTlJbTFwZFNJZ2MzUnliMnRsUFNJak5UVTFJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqQXVNaUkrSUNBZ0lDQThaeUJwWkQwaVFYSjBZbTloY21RdE1TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTFRNNU5TNHdNREF3TURBc0lDMHhPVEV1TURBd01EQXdLU0krUEdjZ2FXUTlJbk5zYVdObElpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d5TVRVdU1EQXdNREF3TENBeE1Ua3VNREF3TURBd0tTSXZQanh3WVhSb0lDQWdJQ0FnSUdROUlrMHpPVFlzTWpBeUxqVWdRek01Tml3eE9UWXVNVFE0TnpJMUlEUXdNUzR4TkRnM01qVXNNVGt4SURRd055NDFMREU1TVNCRE5ERXpMamcxTVRJM05Td3hPVEVnTkRFNUxERTVOaTR4TkRnM01qVWdOREU1TERJd01pNDFJRU0wTVRrc01qQTRMamcxTVRJM05TQTBNVE11T0RVeE1qYzFMREl4TkNBME1EY3VOU3d5TVRRZ1F6UXdNUzR4TkRnM01qVXNNakUwSURNNU5pd3lNRGd1T0RVeE1qYzFJRE01Tml3eU1ESXVOU0JhSUUwME1EZ3VOalUyT0RVMExERTVOaTQ0TkRNeE5EWWdURFF4TUM0d056RXdOamdzTVRrNExqSTFOek0xT1NCTU5EQTFMamd5T0RReU55d3lNREl1TlNCTU5ERXdMakEzTVRBMk9Dd3lNRFl1TnpReU5qUXhJRXcwTURndU5qVTJPRFUwTERJd09DNHhOVFk0TlRRZ1REUXdNeXd5TURJdU5TQk1OREE0TGpZMU5qZzFOQ3d4T1RZdU9EUXpNVFEySUZvaUlDQWdJQ0FnSUdacGJHdzlJaU5oWVdFaUlDQWdJQ0FnSUdsa1BTSmphWEpqYkdVdFltRmpheTFoY25KdmR5MW5iSGx3YUNJdlBqd3ZaejRnSUNBOEwyYytJRHd2YzNablBnPT1cIlxuICAgICAgICAgW2hpZGRlbl09XCIhbGVmdEFycm93VmlzaWJsZVwiIChjbGljayk9XCJuYXZpZ2F0ZSgtMSwgZmFsc2UpXCIvPlxuICAgIDxpbWcgW25nQ2xhc3NdPVwieydhY3RpdmVBcnJvdyc6IHJpZ2h0QXJyb3dBY3RpdmV9XCIgY2xhc3M9XCJhcnJvdyByaWdodFwiXG4gICAgICAgICBzcmM9XCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUJvWldsbmFIUTlJakkwY0hnaUlIWmxjbk5wYjI0OUlqRXVNU0lnZG1sbGQwSnZlRDBpTUNBd0lESTBJREkwSWlCM2FXUjBhRDBpTWpSd2VDSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQjRiV3h1Y3pwemEyVjBZMmc5SW1oMGRIQTZMeTkzZDNjdVltOW9aVzFwWVc1amIyUnBibWN1WTI5dEwzTnJaWFJqYUM5dWN5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaVBqeDBhWFJzWlM4K1BHUmxjMk12UGp4a1pXWnpMejRnSUNBOFp5Qm1hV3hzUFNKdWIyNWxJaUJtYVd4c0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdsa1BTSnRhWFVpSUhOMGNtOXJaVDBpSXpVMU5TSWdjM1J5YjJ0bExYZHBaSFJvUFNJd0xqSWlQaUFnSUNBZ1BHY2dhV1E5SWtGeWRHSnZZWEprTFRFaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLQzAwTmpjdU1EQXdNREF3TENBdE1Ua3hMakF3TURBd01Da2lQanhuSUdsa1BTSnpiR2xqWlNJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NakUxTGpBd01EQXdNQ3dnTVRFNUxqQXdNREF3TUNraUx6NDhjR0YwYUNBZ0lDQWdJQ0JrUFNKTk5EWTRMREl3TWk0MUlFTTBOamdzTVRrMkxqRTBPRGN5TlNBME56TXVNVFE0TnpJMUxERTVNU0EwTnprdU5Td3hPVEVnUXpRNE5TNDROVEV5TnpVc01Ua3hJRFE1TVN3eE9UWXVNVFE0TnpJMUlEUTVNU3d5TURJdU5TQkRORGt4TERJd09DNDROVEV5TnpVZ05EZzFMamcxTVRJM05Td3lNVFFnTkRjNUxqVXNNakUwSUVNME56TXVNVFE0TnpJMUxESXhOQ0EwTmpnc01qQTRMamcxTVRJM05TQTBOamdzTWpBeUxqVWdXaUJOTkRnd0xqWTFOamcxTkN3eE9UWXVPRFF6TVRRMklFdzBPREl1TURjeE1EWTRMREU1T0M0eU5UY3pOVGtnVERRM055NDRNamcwTWpjc01qQXlMalVnVERRNE1pNHdOekV3Tmpnc01qQTJMamMwTWpZME1TQk1ORGd3TGpZMU5qZzFOQ3d5TURndU1UVTJPRFUwSUV3ME56VXNNakF5TGpVZ1REUTRNQzQyTlRZNE5UUXNNVGsyTGpnME16RTBOaUJhSWlBZ0lDQWdJQ0JtYVd4c1BTSWpZV0ZoSWlBZ0lDQWdJQ0JwWkQwaVkybHlZMnhsTFc1bGVIUXRZWEp5YjNjdFpHbHpZMnh2YzNWeVpTMW5iSGx3YUNJZ0lDQWdJQ0FnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb05EYzVMalV3TURBd01Dd2dNakF5TGpVd01EQXdNQ2tnYzJOaGJHVW9MVEVzSURFcElIUnlZVzV6YkdGMFpTZ3RORGM1TGpVd01EQXdNQ3dnTFRJd01pNDFNREF3TURBcElDSXZQand2Wno0Z0lDQThMMmMrSUR3dmMzWm5QZz09XCJcbiAgICAgICAgIFtoaWRkZW5dPVwiIXJpZ2h0QXJyb3dWaXNpYmxlXCIgKGNsaWNrKT1cIm5hdmlnYXRlKDEsIGZhbHNlKVwiLz5cblxuICAgIDxkaXYgY2xhc3M9XCJidXR0b25Db250YWluZXJcIj5cbiAgICAgICAgPGltZyBjbGFzcz1cImFjdGlvbiBjbG9zZVwiXG4gICAgICAgICAgICAgc3JjPVwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCb1pXbG5hSFE5SWpNd2NIZ2lJR2xrUFNKTVlYbGxjbDh4SWlCemRIbHNaVDBpWlc1aFlteGxMV0poWTJ0bmNtOTFibVE2Ym1WM0lEQWdNQ0ExTVRJZ05URXlPeUlnZG1WeWMybHZiajBpTVM0eElpQm1hV3hzUFNJallXRmhJaUIyYVdWM1FtOTRQU0l3SURBZ05URXlJRFV4TWlJZ2QybGtkR2c5SWpJMGNIZ2lJSGh0YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lQaUFnUEhCaGRHZ2dJQ0FnYzNSeWIydGxMWGRwWkhSb1BTSXpNQ0lnYzNSeWIydGxQU0lqTkRRMElpQWdJQ0JrUFNKTk5ETTNMalVzTXpnMkxqWk1NekEyTGprc01qVTJiREV6TUM0MkxURXpNQzQyWXpFMExqRXRNVFF1TVN3eE5DNHhMVE0yTGpnc01DMDFNQzQ1WXkweE5DNHhMVEUwTGpFdE16WXVPQzB4TkM0eExUVXdMamtzTUV3eU5UWXNNakExTGpGTU1USTFMalFzTnpRdU5TQWdZeTB4TkM0eExURTBMakV0TXpZdU9DMHhOQzR4TFRVd0xqa3NNR010TVRRdU1Td3hOQzR4TFRFMExqRXNNell1T0N3d0xEVXdMamxNTWpBMUxqRXNNalUyVERjMExqVXNNemcyTGpaakxURTBMakVzTVRRdU1TMHhOQzR4TERNMkxqZ3NNQ3cxTUM0NUlDQmpNVFF1TVN3eE5DNHhMRE0yTGpnc01UUXVNU3cxTUM0NUxEQk1NalUyTERNd05pNDViREV6TUM0MkxERXpNQzQyWXpFMExqRXNNVFF1TVN3ek5pNDRMREUwTGpFc05UQXVPU3d3UXpRMU1TNDFMRFF5TXk0MExEUTFNUzQxTERRd01DNDJMRFF6Tnk0MUxETTROaTQyZWlJdlBqd3ZjM1puUGc9PVwiXG4gICAgICAgICAgICAgKGNsaWNrKT1cImNsb3NlVmlld2VyKClcIi8+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiaW1hZ2VDb250YWluZXJcIlxuICAgICAgICAgKGNsaWNrKT1cInNob3dOYXZpZ2F0aW9uQXJyb3dzKClcIlxuICAgICAgICAgKHN3aXBlbGVmdCk9XCJuYXZpZ2F0ZSgxLCAkZXZlbnQpXCJcbiAgICAgICAgIChzd2lwZXJpZ2h0KT1cIm5hdmlnYXRlKC0xLCAkZXZlbnQpXCJcbiAgICAgICAgIChwYW4pPVwicGFuKCRldmVudClcIj5cblxuICAgICAgICA8ZGl2ICpuZ0Zvcj0nbGV0IGltZyBvZiBpbWFnZXM7IGxldCBqID0gaW5kZXgnXG4gICAgICAgICAgICAgY2xhc3M9XCJpbWFnZVwiXG4gICAgICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJpbWdbJ2FjdGl2ZSddXCJcbiAgICAgICAgICAgICBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XCJpbWdbJ3ZpZXdlckltYWdlTG9hZGVkJ10gPyAndXJsKCcraW1nW2NhdGVnb3J5U2VsZWN0ZWRdWydwYXRoJ10rJyknIDogbWF0aC5hYnMoY3VycmVudElkeC1qKSA8PTEgPyAndXJsKCcraW1nWydwcmV2aWV3X3h4cyddWydwYXRoJ10rJyknIDogJydcIlxuICAgICAgICAgICAgIFtzdHlsZS5sZWZ0XT1cInRyYW5zZm9ybSsncHgnXCJcbiAgICAgICAgICAgICBbQGltYWdlVHJhbnNpdGlvbl09XCJpbWdbJ3RyYW5zaXRpb24nXVwiPjwvZGl2PlxuXG4gICAgICAgIDxpbWcgKm5nRm9yPSdsZXQgaW1nIG9mIGltYWdlczsgbGV0IGogPSBpbmRleCdcbiAgICAgICAgICAgICBjbGFzcz1cInByZWxvYWRpbmctaW1hZ2VcIlxuICAgICAgICAgICAgIChsb2FkKT1cImltYWdlTG9hZGVkKGltZylcIlxuICAgICAgICAgICAgIHNyYz1cInt7IG1hdGguYWJzKGN1cnJlbnRJZHgtaikgPD0xID8gaW1nW2NhdGVnb3J5U2VsZWN0ZWRdWydwYXRoJ10gOiAnJ319XCIvPlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbmAsXG4gICAgc3R5bGVzOiBbYC5vdXRlckNvbnRhaW5lcnt0b3A6MDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO3Bvc2l0aW9uOmZpeGVkO2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuOTUpO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7ei1pbmRleDoxMDMxfS5pbWFnZUNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtmbG9hdDpub25lO3RvcDowO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowfS5pbWFnZUNvbnRhaW5lciAuaW1hZ2UsLmltYWdlQ29udGFpbmVyIC5wcmVsb2FkaW5nLWltYWdle3Zpc2liaWxpdHk6aGlkZGVufS5pbWFnZUNvbnRhaW5lciAuaW1hZ2UuYWN0aXZle3Bvc2l0aW9uOmFic29sdXRlO3Zpc2liaWxpdHk6dmlzaWJsZTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1zaXplOmNvbnRhaW47YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7bWFyZ2luOmF1dG87bGVmdDowO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtvcGFjaXR5OjF9LmFycm93e29wYWNpdHk6MH0uYXJyb3c6aG92ZXJ7Y3Vyc29yOnBvaW50ZXJ9Lm91dGVyQ29udGFpbmVyOmhvdmVyIC5hcnJvdy5hY3RpdmVBcnJvd3toZWlnaHQ6Y2FsYygyMHB4ICsgMS41dncpO3Bvc2l0aW9uOmFic29sdXRlO3RvcDpjYWxjKDUwJSAtICgyMHB4ICsgMS41dncpLyAyKTtib3R0b206NTAlO3otaW5kZXg6MTtvcGFjaXR5OjE7dHJhbnNpdGlvbjphbGwgZWFzZS1vdXQgLjVzfS5hcnJvdy5sZWZ0e2xlZnQ6MnZ3fS5hcnJvdy5yaWdodHtyaWdodDoydnd9LmFycm93Om5vdCguYWN0aXZlQXJyb3cpOmhvdmVye29wYWNpdHk6MDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuNXN9LmJ1dHRvbkNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyMHB4O2hlaWdodDoyMHB4O3RleHQtYWxpZ246Y2VudGVyO29wYWNpdHk6MTt6LWluZGV4OjIwMDt0cmFuc2l0aW9uOmFsbCBlYXNlLW91dCAuNXN9LmJ1dHRvbkNvbnRhaW5lciAuYWN0aW9ue2hlaWdodDoxMDAlO2N1cnNvcjpwb2ludGVyO3ZlcnRpY2FsLWFsaWduOnRvcH0uYnV0dG9uQ29udGFpbmVyIC5hY3Rpb246Zm9jdXN7b3V0bGluZTowfS5idXR0b25Db250YWluZXIgLmFjdGlvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyMjI7dHJhbnNpdGlvbjphbGwgZWFzZS1vdXQgLjNzfS5idXR0b25Db250YWluZXIgLmFjdGlvbi5jbG9zZXt3aWR0aDoyNnB4O2hlaWdodDoyNnB4fW1kLWJ1dHRvbi10b2dnbGUuY2hlY2tlZHtiYWNrZ3JvdW5kLWNvbG9yOiNhMGEwYTB9Lm1lbnVCdXR0b257cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjIwcHg7cmlnaHQ6MjBweDt0ZXh0LWFsaWduOmNlbnRlcjtvcGFjaXR5OjE7ei1pbmRleDoyMDA7dHJhbnNpdGlvbjphbGwgZWFzZS1vdXQgLjVzfUBmb250LWZhY2V7Zm9udC1mYW1pbHk6J01hdGVyaWFsIEljb25zJztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDo0MDA7c3JjOmxvY2FsKCdNYXRlcmlhbCBJY29ucycpLGxvY2FsKCdNYXRlcmlhbEljb25zLVJlZ3VsYXInKSx1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL21hdGVyaWFsaWNvbnMvdjE5LzJmY3JZRk5hVGpjUzZnNFUzdC1ZNVpqWmpUNUZkRUoxNDBVMkRKWUMzbVkud29mZjIpIGZvcm1hdCgnd29mZjInKX0ubWF0ZXJpYWwtaWNvbnN7Zm9udC1mYW1pbHk6J01hdGVyaWFsIEljb25zJztmb250LXdlaWdodDo0MDA7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC1zaXplOjI0cHg7bGluZS1oZWlnaHQ6MTtsZXR0ZXItc3BhY2luZzpub3JtYWw7dGV4dC10cmFuc2Zvcm06bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jazt3aGl0ZS1zcGFjZTpub3dyYXA7d29yZC13cmFwOm5vcm1hbDtkaXJlY3Rpb246bHRyOy13ZWJraXQtZm9udC1mZWF0dXJlLXNldHRpbmdzOidsaWdhJzstd2Via2l0LWZvbnQtc21vb3RoaW5nOmFudGlhbGlhc2VkfWBdLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJyhkb2N1bWVudDprZXlkb3duKSc6ICdvbktleWRvd24oJGV2ZW50KSdcbiAgICB9LFxuICAgIGFuaW1hdGlvbnM6IFtcbiAgICAgICAgdHJpZ2dlcignaW1hZ2VUcmFuc2l0aW9uJywgW1xuICAgICAgICAgICAgc3RhdGUoJ2VudGVyRnJvbVJpZ2h0Jywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDBweCwgMHB4KSdcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHN0YXRlKCdlbnRlckZyb21MZWZ0Jywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDBweCwgMHB4KSdcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHN0YXRlKCdsZWF2ZVRvTGVmdCcsIHN0eWxlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtMTAwcHgsIDBweCknXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBzdGF0ZSgnbGVhdmVUb1JpZ2h0Jywgc3R5bGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDEwMHB4LCAwcHgpJ1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgdHJhbnNpdGlvbignKiA9PiBlbnRlckZyb21SaWdodCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgzMHB4LCAwcHgpJ1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGFuaW1hdGUoJzI1MG1zIDUwMG1zIGVhc2UtaW4nKVxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IGVudGVyRnJvbUxlZnQnLCBbXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoLTMwcHgsIDBweCknXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMjUwbXMgNTAwbXMgZWFzZS1pbicpXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIHRyYW5zaXRpb24oJyogPT4gbGVhdmVUb0xlZnQnLCBbXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMjUwbXMgZWFzZS1vdXQnKV1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IGxlYXZlVG9SaWdodCcsIFtcbiAgICAgICAgICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBhbmltYXRlKCcyNTBtcyBlYXNlLW91dCcpXVxuICAgICAgICAgICAgKVxuICAgICAgICBdKSxcbiAgICAgICAgdHJpZ2dlcignc2hvd1ZpZXdlclRyYW5zaXRpb24nLCBbXG4gICAgICAgICAgICBzdGF0ZSgndHJ1ZScsIHN0eWxlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBzdGF0ZSgndm9pZCcsIHN0eWxlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCd2b2lkID0+IConLCBbXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnMTAwMG1zIGVhc2UtaW4nKV1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IHZvaWQnLCBbXG4gICAgICAgICAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgnNTAwbXMgZWFzZS1vdXQnKV1cbiAgICAgICAgICAgIClcbiAgICAgICAgXSlcbiAgICBdXG59KVxuXG5leHBvcnQgY2xhc3MgVmlld2VyQ29tcG9uZW50IHtcbiAgICBzaG93Vmlld2VyOiBib29sZWFuXG4gICAgaW1hZ2VzOiBBcnJheTxhbnk+ID0gW3t9XVxuICAgIGN1cnJlbnRJZHg6IG51bWJlciA9IDBcbiAgICBsZWZ0QXJyb3dWaXNpYmxlOiBib29sZWFuID0gdHJ1ZVxuICAgIHJpZ2h0QXJyb3dWaXNpYmxlOiBib29sZWFuID0gdHJ1ZVxuICAgIGNhdGVnb3J5U2VsZWN0ZWQ6IHN0cmluZyA9ICdwcmV2aWV3X3h4cydcbiAgICB0cmFuc2Zvcm06IG51bWJlclxuICAgIG1hdGg6IE1hdGhcbiAgICBwcml2YXRlIHF1YWxpdHlTZWxlY3RvclNob3duOiBib29sZWFuID0gZmFsc2VcbiAgICBwcml2YXRlIHF1YWxpdHlTZWxlY3RlZDogc3RyaW5nID0gJ2F1dG8nXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGltYWdlU2VydmljZTogSW1hZ2VTZXJ2aWNlKSB7XG4gICAgICAgIGltYWdlU2VydmljZS5pbWFnZXNVcGRhdGVkJC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBpbWFnZXMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzID0gaW1hZ2VzXG4gICAgICAgICAgICB9KVxuICAgICAgICBpbWFnZVNlcnZpY2UuaW1hZ2VTZWxlY3RlZEluZGV4VXBkYXRlZCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgbmV3SW5kZXggPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudElkeCA9IG5ld0luZGV4XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiBpbWFnZVsnYWN0aXZlJ10gPSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydhY3RpdmUnXSA9IHRydWVcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IDBcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVF1YWxpdHkoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgaW1hZ2VTZXJ2aWNlLnNob3dJbWFnZVZpZXdlckNoYW5nZWQkLnN1YnNjcmliZShcbiAgICAgICAgICAgIHNob3dWaWV3ZXIgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1ZpZXdlciA9IHNob3dWaWV3ZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHRoaXMubWF0aCA9IE1hdGhcbiAgICB9XG5cbiAgICBnZXQgbGVmdEFycm93QWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SWR4ID4gMFxuICAgIH1cblxuICAgIGdldCByaWdodEFycm93QWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SWR4IDwgdGhpcy5pbWFnZXMubGVuZ3RoIC0gMVxuICAgIH1cblxuICAgIHBhbihzd2lwZTogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gc3dpcGUuZGVsdGFYXG4gICAgfVxuXG4gICAgb25SZXNpemUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xuICAgICAgICAgICAgaW1hZ2VbJ3ZpZXdlckltYWdlTG9hZGVkJ10gPSBmYWxzZVxuICAgICAgICAgICAgaW1hZ2VbJ2FjdGl2ZSddID0gZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpXG4gICAgfVxuXG4gICAgc2hvd1F1YWxpdHlTZWxlY3RvcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWFsaXR5U2VsZWN0b3JTaG93biA9ICF0aGlzLnF1YWxpdHlTZWxlY3RvclNob3duXG4gICAgfVxuXG4gICAgcXVhbGl0eUNoYW5nZWQobmV3UXVhbGl0eTogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMucXVhbGl0eVNlbGVjdGVkID0gbmV3UXVhbGl0eVxuICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKClcbiAgICB9XG5cbiAgICBpbWFnZUxvYWRlZChpbWFnZTogYW55KTogdm9pZCB7XG4gICAgICAgIGltYWdlWyd2aWV3ZXJJbWFnZUxvYWRlZCddID0gdHJ1ZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRpcmVjdGlvbiAoLTE6IGxlZnQsIDE6IHJpZ2h0KVxuICAgICAqIHN3aXBlICh1c2VyIHN3aXBlZClcbiAgICAgKi9cbiAgICBuYXZpZ2F0ZShkaXJlY3Rpb246IG51bWJlciwgc3dpcGU6IGFueSk6IHZvaWQge1xuICAgICAgICBpZiAoKGRpcmVjdGlvbiA9PT0gMSAmJiB0aGlzLmN1cnJlbnRJZHggPCB0aGlzLmltYWdlcy5sZW5ndGggLSAxKSB8fFxuICAgICAgICAgICAgKGRpcmVjdGlvbiA9PT0gLTEgJiYgdGhpcy5jdXJyZW50SWR4ID4gMCkpIHtcblxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3RyYW5zaXRpb24nXSA9ICdsZWF2ZVRvUmlnaHQnXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4IC0gMV1bJ3RyYW5zaXRpb24nXSA9ICdlbnRlckZyb21MZWZ0J1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnbGVhdmVUb0xlZnQnXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4ICsgMV1bJ3RyYW5zaXRpb24nXSA9ICdlbnRlckZyb21SaWdodCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudElkeCArPSBkaXJlY3Rpb25cblxuICAgICAgICAgICAgaWYgKHN3aXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlTmF2aWdhdGlvbkFycm93cygpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd05hdmlnYXRpb25BcnJvd3MoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93TmF2aWdhdGlvbkFycm93cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3dWaXNpYmxlID0gdHJ1ZVxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3dWaXNpYmxlID0gdHJ1ZVxuICAgIH1cblxuICAgIGNsb3NlVmlld2VyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IGltYWdlWyd0cmFuc2l0aW9uJ10gPSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuaW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4gaW1hZ2VbJ2FjdGl2ZSddID0gZmFsc2UpXG4gICAgICAgIHRoaXMuaW1hZ2VTZXJ2aWNlLnNob3dJbWFnZVZpZXdlcihmYWxzZSlcbiAgICB9XG5cbiAgICBvbktleWRvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJldmVudCA9IFszNywgMzksIDI3LCAzNiwgMzVdXG4gICAgICAgICAgICAuZmluZChubyA9PiBubyA9PT0gZXZlbnQua2V5Q29kZSlcbiAgICAgICAgaWYgKHByZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAocHJldmVudCkge1xuICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0ZSBsZWZ0XG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSgtMSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgLy8gbmF2aWdhdGUgcmlnaHRcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKDEsIGZhbHNlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICAgIC8vIGVzY1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VWaWV3ZXIoKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDM2OlxuICAgICAgICAgICAgICAgIC8vIHBvcyAxXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2xlYXZlVG9SaWdodCdcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJZHggPSAwXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2VudGVyRnJvbUxlZnQnXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMzU6XG4gICAgICAgICAgICAgICAgLy8gZW5kXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsndHJhbnNpdGlvbiddID0gJ2xlYXZlVG9MZWZ0J1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudElkeCA9IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWyd0cmFuc2l0aW9uJ10gPSAnZW50ZXJGcm9tUmlnaHQnXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZU5hdmlnYXRpb25BcnJvd3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubGVmdEFycm93VmlzaWJsZSA9IGZhbHNlXG4gICAgICAgIHRoaXMucmlnaHRBcnJvd1Zpc2libGUgPSBmYWxzZVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlSW1hZ2UoKTogdm9pZCB7XG4gICAgICAgIC8vIHdhaXQgZm9yIGFuaW1hdGlvbiB0byBlbmRcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVF1YWxpdHkoKVxuICAgICAgICAgICAgdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsnYWN0aXZlJ10gPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2UgIT0gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZVsnYWN0aXZlJ10gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCA1MDApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVRdWFsaXR5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gICAgICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxuXG4gICAgICAgIHN3aXRjaCAodGhpcy5xdWFsaXR5U2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2F1dG8nOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfeHhzJ1xuXG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194eHMnXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3h4cyddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld194cydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld194cyddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeHMnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfcydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbldpZHRoID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19zJ10ud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuSGVpZ2h0ID4gdGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50SWR4XVsncHJldmlld19zJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X20nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfbSddLndpZHRoICYmXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkhlaWdodCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfbSddLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncHJldmlld19sJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuV2lkdGggPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X2wnXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X2wnXS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfeGwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5XaWR0aCA+IHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudElkeF1bJ3ByZXZpZXdfeGwnXS53aWR0aCAmJlxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5IZWlnaHQgPiB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRJZHhdWydwcmV2aWV3X3hsJ10uaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdyYXcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdsb3cnOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfeHhzJ1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdtaWQnOiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gJ3ByZXZpZXdfbSdcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnaGlnaCc6IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSAncmF3J1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9ICdwcmV2aWV3X20nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBJbWFnZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2ltYWdlLnNlcnZpY2UnXG5pbXBvcnQgeyBHYWxsZXJ5Q29tcG9uZW50IH0gZnJvbSAnLi9nYWxsZXJ5L2dhbGxlcnkuY29tcG9uZW50J1xuaW1wb3J0IHsgVmlld2VyQ29tcG9uZW50IH0gZnJvbSAnLi92aWV3ZXIvdmlld2VyLmNvbXBvbmVudCdcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nXG5pbXBvcnQgeyBCcm93c2VyQW5pbWF0aW9uc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXIvYW5pbWF0aW9ucydcbmltcG9ydCB7IEh0dHBDbGllbnRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCdcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBIdHRwQ2xpZW50TW9kdWxlLFxuICAgIEJyb3dzZXJBbmltYXRpb25zTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1xuICAgIEdhbGxlcnlDb21wb25lbnQsXG4gICAgVmlld2VyQ29tcG9uZW50XG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIEltYWdlU2VydmljZVxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgR2FsbGVyeUNvbXBvbmVudCxcbiAgICBWaWV3ZXJDb21wb25lbnRcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyMkltYWdlR2FsbGVyeU1vZHVsZSB7XG59XG4iXSwibmFtZXMiOlsiU3ViamVjdCIsIkluamVjdGFibGUiLCJodHRwIiwiRXZlbnRFbWl0dGVyIiwiQ29tcG9uZW50IiwiSHR0cENsaWVudCIsIkNoYW5nZURldGVjdG9yUmVmIiwiSW5wdXQiLCJPdXRwdXQiLCJWaWV3Q2hpbGQiLCJWaWV3Q2hpbGRyZW4iLCJIb3N0TGlzdGVuZXIiLCJ0cmlnZ2VyIiwic3RhdGUiLCJzdHlsZSIsInRyYW5zaXRpb24iLCJhbmltYXRlIiwiTmdNb2R1bGUiLCJDb21tb25Nb2R1bGUiLCJGb3Jtc01vZHVsZSIsIkh0dHBDbGllbnRNb2R1bGUiLCJCcm93c2VyQW5pbWF0aW9uc01vZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO1FBR0E7WUFFWSx3QkFBbUIsR0FBRyxJQUFJQSxZQUFPLEVBQWMsQ0FBQTtZQUMvQyxvQ0FBK0IsR0FBRyxJQUFJQSxZQUFPLEVBQVUsQ0FBQTtZQUN2RCwwQkFBcUIsR0FBRyxJQUFJQSxZQUFPLEVBQVcsQ0FBQTtZQUV0RCxtQkFBYyxHQUEyQixJQUFJLENBQUMsbUJBQW1CLENBQUMsWUFBWSxFQUFFLENBQUE7WUFDaEYsK0JBQTBCLEdBQXVCLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtZQUNwRyw0QkFBdUIsR0FBd0IsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFlBQVksRUFBRSxDQUFBO1NBYTNGOzs7OztRQVhHLG1DQUFZOzs7O1lBQVosVUFBYSxNQUFrQjtnQkFDM0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTthQUN4Qzs7Ozs7UUFFRCwrQ0FBd0I7Ozs7WUFBeEIsVUFBeUIsUUFBZ0I7Z0JBQ3JDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7YUFDdEQ7Ozs7O1FBRUQsc0NBQWU7Ozs7WUFBZixVQUFnQixJQUFhO2dCQUN6QixJQUFJLENB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QUFDLFVBQVUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sRUFBRTs0QkFDbkUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFlBQVksQ0FBQTt5QkFDdkM7d0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsS0FBSzs0QkFDOUQsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLE1BQU0sRUFBRTs0QkFDbEUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTt5QkFDdEM7d0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSzs0QkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sRUFBRTs0QkFDakUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTt5QkFDdEM7d0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSzs0QkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE1BQU0sRUFBRTs0QkFDakUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFdBQVcsQ0FBQTt5QkFDdEM7d0JBQ0QsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSzs0QkFDN0QsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcs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